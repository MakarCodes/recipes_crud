(this.webpackJsonpcrud_task_intent=this.webpackJsonpcrud_task_intent||[]).push([[0],{195:function(e,t,n){"use strict";n.r(t);var i,r=n(0),c=n.n(r),a=n(36),s=n.n(a),o=n(15),l=(n(89),n(90),n(39)),d=n.n(l),p=n(1),u=function(e){var t=e.children;return Object(p.jsxs)("div",{className:d.a.Wrapper,children:[Object(p.jsx)("h1",{className:d.a.Title,"data-testid":"title",children:"Best Recipes"}),Object(p.jsx)("div",{className:d.a.InnerWrapper,style:{minHeight:"".concat(window.innerHeight-250,"px")},"data-testid":"inner-layout-wrapper",children:t})]})},j=n(3),b=n(22),_=n(38),m=n(79),O=n(42),f=O.a().shape({name:O.b().required("This field is required").min(3,"Minimum 3 letters").matches(/^[aA-zZ\s]+$/,"Only alphabets are allowed for this field"),ingredients:O.b().required("This field is required").matches(/^[a-zA-Z\, ]{2,}$/,"Only alphabets, commas and spaces are allowed for this field")}),E=n(7),h=n.n(E),R=n(8),x=n(2),g=n(197),v=function(e,t){return Object(b.a)(Object(b.a)({},e),t)},C=function(e,t){var n={id:Object(g.a)(),name:t.payload.name,ingredients:t.payload.ingredients.split(",")},i=Object(x.a)(e.recipes);return i.push(n),v(e,{recipes:i})},I=function(e,t){return v(e,{recipeForRemoval:t.payload.recipe})},y=function(e,t){var n=e.recipes.filter((function(e){return e.id!==t.payload.id}));return v(e,{recipes:n,recipeForRemoval:null})},N=function(e,t){return v(e,{editedRecipe:t.payload.recipe})},T=function(e,t){var n=e.recipes.map((function(e){return e.id===t.payload.recipe.id?t.payload.recipe:e}));return v(e,{recipes:n,editedRecipe:null})};!function(e){e.ADD_RECIPE="ADD_RECIPE",e.REMOVE_RECIPE="REMOVE_RECIPE",e.SET_EDITED_RECIPE="SET_EDITED_RECIPE",e.EDIT_RECIPE="EDIT_RECIPE",e.SET_RECIPE_TO_REMOVE="SET_RECIPE_TO_REMOVE"}(i||(i={}));var S={recipes:JSON.parse(localStorage.getItem("recipes")||"[]"),editedRecipe:null,recipeForRemoval:null},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.ADD_RECIPE:return C(e,t);case i.SET_RECIPE_TO_REMOVE:return I(e,t);case i.REMOVE_RECIPE:return y(e,t);case i.SET_EDITED_RECIPE:return N(e,t);case i.EDIT_RECIPE:return T(e,t);default:return e}},B={recipesState:S,recipesActions:{addRecipe:function(e,t){},setRecipeToRemove:function(e){},removeRecipe:function(e){},setEditedRecipe:function(e){},editRecipe:function(e){}}},D=Object(r.createContext)(B),M=function(e){var t=e.children,n=Object(r.useReducer)(k,S),c=Object(R.a)(n,2),a=c[0],s=function(e){return{addRecipe:function(t,n){return e({type:i.ADD_RECIPE,payload:{name:t,ingredients:n}})},setRecipeToRemove:function(t){return e({type:i.SET_RECIPE_TO_REMOVE,payload:{recipe:t}})},removeRecipe:function(t){return e({type:i.REMOVE_RECIPE,payload:{id:t}})},setEditedRecipe:function(t){return e({type:i.SET_EDITED_RECIPE,payload:{recipe:t}})},editRecipe:function(t){return e({type:i.EDIT_RECIPE,payload:{recipe:t}})}}}(c[1]);Object(r.useEffect)((function(){localStorage.setItem("recipes",JSON.stringify(a.recipes))}),[a.recipes]);var o=s.addRecipe,l=s.setRecipeToRemove,d=s.removeRecipe,u=s.setEditedRecipe,j=s.editRecipe,b={recipesState:a,recipesActions:{addRecipe:o,setRecipeToRemove:l,removeRecipe:d,setEditedRecipe:u,editRecipe:j}};return Object(p.jsx)(D.Provider,{value:b,children:t})},P=function(){var e,t,n=Object(r.useContext)(D),i=n.recipesState,c=n.recipesActions,a=i.editedRecipe,s=c.addRecipe,o=c.editRecipe,l=Object(j.f)(),d=Object(_.b)({resolver:Object(m.a)(f),mode:"all"}),u=d.register,O=d.handleSubmit,E=d.errors,R=d.setValue,x=function(){R("name",""),R("ingredients",""),l.push("/")};return Object(p.jsxs)("div",{className:h.a.Wrapper,children:[Object(p.jsx)("h2",{className:h.a.Title,children:"Your new recipe"}),Object(p.jsxs)("form",{className:h.a.Form,onSubmit:O((function(e){var t=e.name,n=e.ingredients,i=n.split(",");if(a){var r=Object(b.a)(Object(b.a)({},a),{},{name:t,ingredients:i});o(r)}else s(t,n);x()})),children:[Object(p.jsxs)("div",{className:h.a.InputGroup,children:[Object(p.jsx)("label",{className:h.a.LabelRequired,children:"Recipe name:"}),Object(p.jsx)("input",{className:h.a.Input,ref:u,name:"name",type:"text",defaultValue:a?a.name:"",placeholder:"Recipe name"}),E.name&&Object(p.jsx)("p",{className:h.a.ErrorField,children:null===(e=E.name)||void 0===e?void 0:e.message})]}),Object(p.jsxs)("div",{className:h.a.InputGroup,children:[Object(p.jsx)("label",{className:h.a.LabelRequired,children:"Ingredients:"}),Object(p.jsx)("input",{className:h.a.Input,ref:u,name:"ingredients",type:"text",defaultValue:a?a.ingredients.join():"",placeholder:"Enter Ingredients,Separated,By Comma"}),E.ingredients&&Object(p.jsx)("p",{className:h.a.ErrorField,children:null===(t=E.ingredients)||void 0===t?void 0:t.message})]}),Object(p.jsxs)("div",{className:h.a.ButtonsContainer,children:[Object(p.jsx)("button",{type:"button",onClick:function(){x()},className:"".concat(h.a.Btn," ").concat(h.a.Cancel),children:"Cancel"}),Object(p.jsx)("button",{type:"submit",className:h.a.Btn,children:"Submit"})]})]})]})},F=n(29),V=n.n(F),W=function(){var e=Object(r.useState)(!1),t=Object(R.a)(e,2),n=t[0],i=t[1];return{isVisible:n,toggleVisibility:function(){return i(!n)}}},A=n(84),w=n.n(A),q=function(e){var t=e.text,n=e.bgColor,i=e.testID,r=e.action;return Object(p.jsx)("button",{onClick:function(){r()},className:w.a.Btn,style:{backgroundColor:"".concat(n)},"data-testid":i,children:t})},L=n(20),Q=n.n(L),G=function(e){var t=e.recipe,n=e.handleDeleteClick,i=Object(r.useContext)(D).recipesActions,c=t.name,a=t.ingredients,s=i.setEditedRecipe,o=Object(j.f)(),l=W(),d=l.isVisible,u=l.toggleVisibility,b=Object(r.useMemo)((function(){return a.map((function(e,t){return Object(p.jsx)("li",{className:Q.a.SingleIngredient,children:e},e+t)}))}),[a]),_=Object(r.useCallback)((function(e){s(e),o.push("/form")}),[s,o]);return Object(p.jsxs)("div",{className:Q.a.Card,children:[Object(p.jsx)("div",{className:Q.a.Name,onClick:function(){return u()},"data-testid":t.name,children:c}),d&&Object(p.jsxs)("div",{className:Q.a.IngredientsWrapper,children:[Object(p.jsx)("ul",{className:Q.a.Ingredients,"data-testid":"ingredients",children:b}),Object(p.jsxs)("div",{className:Q.a.ButtonsContainer,children:[Object(p.jsx)(q,{text:"Edit",bgColor:"#007bff",action:function(){return _(t)},testID:"edit-btn"}),Object(p.jsx)(q,{text:"Remove",bgColor:"#dc3545",action:function(){return n(t)},testID:"remove-btn"})]})]})]})},J=n(23),z=n.n(J),Y=document.getElementById("modal-root"),Z=function(e){var t=e.isVisible,n=e.toggleVisibility,i=e.children,c=Object(r.useCallback)((function(e){27===e.keyCode&&n()}),[n]);return Object(r.useEffect)((function(){return t&&document.addEventListener("keydown",c,!1),function(){return document.removeEventListener("keydown",c,!1)}}),[c,t]),t?s.a.createPortal(Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:z.a.Overlay,onClick:function(){return n()}}),Object(p.jsx)("div",{className:z.a.Wrapper,children:Object(p.jsxs)("div",{className:z.a.Modal,children:[Object(p.jsx)("div",{className:z.a.ModalClose,children:Object(p.jsx)("button",{type:"button",className:z.a.ModalCloseButton,"data-dismiss":"modal","aria-label":"Close",onClick:function(){return n()},children:Object(p.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})}),i]})})]}),Y):null},H=n(40),U=n.n(H),$=function(e){var t=e.recipeForRemoval,n=e.toggleVisibility,i=Object(r.useContext)(D).recipesActions,c=i.removeRecipe,a=i.setRecipeToRemove,s=Object(r.useCallback)((function(){c(t.id),n()}),[c,n,t.id]),o=Object(r.useCallback)((function(){n(),a(null)}),[n,a]);return Object(p.jsxs)("div",{className:U.a.Wrapper,children:[Object(p.jsx)("h2",{className:U.a.Title,children:"Delete"}),Object(p.jsxs)("p",{className:U.a.Question,children:["Do You want to delete recipe - ",t.name,"?"]}),Object(p.jsxs)("div",{style:{textAlign:"right"},children:[Object(p.jsx)(q,{text:"Delete",action:s,bgColor:"#dc3545",testID:"btn-delete"}),Object(p.jsx)(q,{text:"Cancel",action:o,bgColor:"grey",testID:"btn-cancel"})]})]})},K=function(){var e=Object(r.useContext)(D),t=e.recipesState,n=e.recipesActions,i=t.recipeForRemoval,c=t.recipes,a=W(),s=a.isVisible,l=a.toggleVisibility,d=function(e,t){return e.map((function(e){return Object(p.jsx)(G,{recipe:e,handleDeleteClick:t},e.id)}))}(c,Object(r.useCallback)((function(e){l(),n.setRecipeToRemove(e)}),[l,n]));return Object(p.jsxs)("div",{className:V.a.Wrapper,children:[s&&Object(p.jsx)(Z,{isVisible:s,toggleVisibility:l,children:i&&Object(p.jsx)($,{recipeForRemoval:i,toggleVisibility:l})}),Object(p.jsx)("div",{className:V.a.AddBtnBox,children:Object(p.jsx)(o.b,{to:"/form",className:V.a.AddLink,onClick:function(){return n.setEditedRecipe(null)},"data-testid":"new-link-btn",children:"Add new"})}),!t.recipes.length&&Object(p.jsx)("p",{className:V.a.Info,"data-testid":"info",children:"Sorry, lack of new recipes. Please click add button to add new recipe."}),Object(p.jsx)("div",{"data-testid":"recipes-container",children:d})]})},X=n(41),ee=n.n(X),te=function(){var e=Object(j.g)();return Object(p.jsxs)("div",{className:ee.a.Container,children:[Object(p.jsxs)("h2",{className:ee.a.Info,children:["Sorry, no match found for ",Object(p.jsx)("code",{children:e.pathname})]}),Object(p.jsx)(o.b,{to:"/",className:ee.a.Back,children:"Back to main page"})]})},ne=function(){return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(j.c,{children:[Object(p.jsx)(j.a,{path:"/form",component:P}),Object(p.jsx)(j.a,{exact:!0,path:"/",component:K}),Object(p.jsx)(j.a,{component:te})]})})},ie=function(){return Object(p.jsx)(u,{children:Object(p.jsx)(ne,{})})};s.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(o.a,{basename:"/recipes_crud",children:Object(p.jsx)(M,{children:Object(p.jsx)(ie,{})})})}),document.getElementById("root"))},20:function(e,t,n){e.exports={Card:"SingleRecipe_Card__3TYnY",Name:"SingleRecipe_Name__1vF8M",IngredientsWrapper:"SingleRecipe_IngredientsWrapper__3ZZ4Q",Ingredients:"SingleRecipe_Ingredients__hlN_f",SingleIngredient:"SingleRecipe_SingleIngredient__2U0-q",ButtonsContainer:"SingleRecipe_ButtonsContainer__222jr"}},23:function(e,t,n){e.exports={Overlay:"Modal_Overlay__1glzW",Wrapper:"Modal_Wrapper__1hkjW",Modal:"Modal_Modal__cP9b3",ModalClose:"Modal_ModalClose__ic84a",ModalCloseButton:"Modal_ModalCloseButton__UPWzy"}},29:function(e,t,n){e.exports={Wrapper:"Recipes_Wrapper__1Qq-J",Info:"Recipes_Info__3i21J",AddBtnBox:"Recipes_AddBtnBox__134wk",AddLink:"Recipes_AddLink__2tdMT"}},39:function(e,t,n){e.exports={Wrapper:"Layout_Wrapper__2hgCc",InnerWrapper:"Layout_InnerWrapper__-aJeY",Title:"Layout_Title__17HwR"}},40:function(e,t,n){e.exports={Wrapper:"ModalContent_Wrapper__3ymPX",Title:"ModalContent_Title__zOppH",Question:"ModalContent_Question__3BqQq"}},41:function(e,t,n){e.exports={Container:"Page404_Container__ViebZ",Info:"Page404_Info__Q7Ps0",Back:"Page404_Back__obIKz"}},7:function(e,t,n){e.exports={Wrapper:"Form_Wrapper__2QnEF",Title:"Form_Title__1g3rt",Form:"Form_Form__2p0qG",InputGroup:"Form_InputGroup__3-DRr",Labrl:"Form_Labrl__3w49q",LabelRequired:"Form_LabelRequired__1d_6Q",Input:"Form_Input__3GUhS",ErrorField:"Form_ErrorField__l4i7b",ButtonsContainer:"Form_ButtonsContainer__2dPVg",Btn:"Form_Btn__2TnI6",Cancel:"Form_Cancel__2sGv5"}},84:function(e,t,n){e.exports={Btn:"Button_Btn__xMFpt"}},90:function(e,t,n){}},[[195,1,2]]]);
//# sourceMappingURL=main.93cc44a2.chunk.js.map